@using Whosales.Domain
@model Employer
@{
	Layout = "EmployerLayout";
}

@if (Model != null)
{
	<h4>Информация о сотруднике @Model.Name
		@if (this.User.IsInRole("admin"))
		{
			@Html.ActionLink("Обновить информацию", "Update", "Employer", new {id = Model.EmployerId}, new {@class="btn btn-sm btn-primary"})
		}
	</h4>
	<div>Имя : @Model.Name</div>
	<div>Объем полученных товаров : @Model.ReceiptReports.Sum(x => x.Volume)</div>
	<div>Стоимость полученных товаров : @Model.ReceiptReports.Sum(x => x.Cost)</div>
	<div>Объем отпуска товаров : @Model.ReleaseReports.Sum(x => x.Volume)</div>
	<div>Стоимость отпуска товаров : @Model.ReleaseReports.Sum(x => x.Cost)</div>
	<hr size="10" />
	<div>
		@if (this.User.IsInRole("admin"))
		{
			<p>Отпуск товара @Html.ActionLink("Добавить отчет", "Add", "ReleaseReport", new{selectedEmployerId = Model.EmployerId}, new {@class="btn btn-sm btn-primary"})</p>
		}
		<table class="table">
			<tr>
				<td>Заказчик</td>
				<td>Название товара</td>
				<td>Количество</td>
				<td>Стоимость</td>
				<td></td>
				<td></td>
				<td></td>
			</tr>
			@foreach (var ReleaseReport in Model.ReleaseReports)
			{
				<tr>
					<td>@ReleaseReport.Customer.Name</td>
					<td>@ReleaseReport.Product.Name</td>
					<td>@ReleaseReport.Volume</td>
					<td>@ReleaseReport.Cost</td>
					<td>@Html.ActionLink("Подробнее", "GetById", "ReleaseReport", new {id = @ReleaseReport.ReleaseReportId}, new {@class="btn btn-sm btn-primary"})</td>
					@if (this.User.IsInRole("admin"))
					{
						<td>
							@Html.ActionLink("Обновить", "Update", "ReleaseReport", new {id = @ReleaseReport.ReleaseReportId}, new {@class="btn btn-sm btn-primary"})
						</td>
						<td>
							@Html.ActionLink("Удалить", "Delete", "ReleaseReport", new {id = @ReleaseReport.ReleaseReportId}, new {@class="btn btn-sm btn-danger"})
						</td>
					}
				</tr>
			}
		</table>
	</div>
	<hr size="10" />
	<div>
		<p>Получение товара @Html.ActionLink("Добавить отчет", "Add", "ReceiptReport", new{selectedEmployerId = Model.EmployerId}, new {@class="btn btn-sm btn-primary"})</p>
		<table class="table">
			<tr>
				<td>Поставщик</td>
				<td>Название товара</td>
				<td>Количество</td>
				<td>Стоимость</td>
				<td></td>
				<td></td>
				<td></td>
			</tr>
			@foreach (var ReceiptReport in Model.ReceiptReports)
			{
				<tr>
					<td>@ReceiptReport.Provaider.Name</td>
					<td>@ReceiptReport.Product.Name</td>
					<td>@ReceiptReport.Volume</td>
					<td>@ReceiptReport.Cost</td>
					<td>@Html.ActionLink("Подробнее", "GetById", "ReceiptReport", new {id = @ReceiptReport.ReceiptReportId}, new {@class="btn btn-sm btn-primary"})</td>
					@if (this.User.IsInRole("admin"))
					{
						<td>
							@Html.ActionLink("Обновить", "Update", "ReceiptReport", new {id = @ReceiptReport.ReceiptReportId}, new {@class="btn btn-sm btn-primary"})
						</td>
						<td>
							@Html.ActionLink("Удалить", "Delete", "ReceiptReport", new {id = @ReceiptReport.ReceiptReportId}, new {@class="btn btn-sm btn-danger"})
						</td>
					}
				</tr>
			}
		</table>
	</div>
}
else
{
	<h2>Сотрудника с данным id не обнаружено</h2>
}