@using Whosales.Domain
@model Manufacturer
@{
	Layout = "_Layout";
}

<h4>Информация о поставщике @Model.Name 
	@if (this.User.IsInRole("admin"))
	{
		@Html.ActionLink("Обновить информацию", "Update", "Manufacturer", new {id = Model.ManufacturerId}, new {@class="btn btn-sm btn-primary"})
	}
</h4>

<div>Название : @Model.Name</div>
<div>Количество производимыхх товаров : @Model.Products.Count</div>
@if (this.User.IsInRole("admin"))
{
	<p>Постовляемые товары @Html.ActionLink("Добавить товар", "Add", "Product", new{selectedManufacturerId = Model.ManufacturerId}, new {@class="btn btn-sm btn-primary"})</p>
}
<table class="table">
	<tr>
		<td>Название</td>
		<td>Условие хранения</td>
		<td>Упаковка</td>
		<td>Тип товара</td>
	</tr>
	@foreach (var product in Model.Products)
	{
		<tr>
			<td>@product.Name</td>
			<td>@product.StorageConditions</td>
			<td>@product.Package</td>
			<td>@product.Type.Name</td>
			<td>@Html.ActionLink("Подробнее", "GetById", "Product", new {id = @product.ProductId}, new {@class="btn btn-sm btn-primary"})</td>
			@if (this.User.IsInRole("admin"))
			{
				<td>
					@Html.ActionLink("Обновить", "Update", "Product", new {id = @product.ProductId}, new {@class="btn btn-sm btn-primary"})
				</td>
				<td>
					@Html.ActionLink("Удалить", "Delete", "Product", new {id = @product.ProductId}, new {@class="btn btn-sm btn-danger"})
				</td>
			}
		</tr>
	}
</table>
